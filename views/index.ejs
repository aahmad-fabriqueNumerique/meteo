<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>WEATHER APP</title>
  </head>
  <body>
    <section class="wrapper">
      <form action="/meteo" method="get">
        <input type="text" name="city" placeholder="Entrez votre ville" />
        <button type="submit">Get Meteo</button>
      </form>

      <section class="graph">
        <% if (meteo) { %>
        <h1><%= city.toUpperCase()  %></h1>
        <h4><%= meteo.sys.country  %></h4>
        <% } %>        
      </section>

      <section class="clock">
        <% if (error) { %>
        <p class="error"><%= error %></p>
        <% } else if (meteo) { %>
        <figure class="flipper">
          <% if (meteo.weather[0].main == "Clear") { %>
          <span class="icon">2</span>
          <%} else if (meteo.weather[0].main == "Clouds") { %>
          <span class="icon">3</span>
          <%} else if (meteo.weather[0].main == "Tornado") { %>
          <span class="icon">4</span>
          <%} else if (meteo.weather[0].main == "Rain" || weather.weather[0].main == "Drizzle" || weather.weather[0].main == "Haze") { %>
          <span class="icon">5</span>
          <% } %>
        </figure>

        <figure class="flipper">
          <span> <%= Math.floor(meteo.main.temp) %></span>
        </figure>
      </section>

      <div style="z-index: 99; display: flex; width: 100%; justify-content: center; flex-direction: column; ">
        <h2 style="color: aliceblue; ">
            humidity : <%= meteo.main.humidity %>
        </h2>
        <h2 style="color: aliceblue; ">
            pressure : <%= meteo.main.pressure %>
        </h2>
        <h2 style="color: aliceblue; ">
            Wind speed : <%= meteo.wind.speed %>
        </h2>
        <h2 style="color: aliceblue; ">
            country : <%= meteo.sys.country %>
        </h2>
        <h2 style="color: aliceblue; ">
            Sunrise <%= new Date(meteo.sys.sunrise * 1000).toLocaleTimeString() %> 
            - Sunset <%= new Date (meteo.sys.sunset * 1000).toLocaleTimeString() %>
        </h2>
      </div>

      <% } %>

    </section>
  </body>
</html>